<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Metronome Widget</title>
  <link rel="stylesheet" href="style.css"/>
  <!-- Load Speed Mode and Random Mode first -->
  <script defer src="speed_mode.js"></script>
  <script defer src="random_mode.js"></script>
  <script defer src="script.js"></script>
</head>
<body>
  <!-- Metronome Container -->
  <div class="bpm_container">
    <!-- Speed Icon -->
    <img src="icons/speed_off.png" id="speedIcon" class="speed-icon" alt="Mode Toggle" data-mode="speed" data-state="off" />
    <!-- Settings Icon -->
    <img src="icons/settings.png" id="settingsIcon" class="settings-icon" alt="Settings" />
    <!-- Timer Display -->
    <div class="timer-wrapper">
      <div class="timer-display">00:00;00</div>
      <img src="icons/refresh_icon.png" class="reset-icon" style="display: none;" />
    </div>

    <!-- BPM Controls -->
    <div class="bpm-wrapper">
      <img src="icons/minus_icon.png" alt="Decrease BPM" id="minusBtn" class="control-icon" />
      <div id="bpmDisplay" class="bpm-display">100</div>
      <img src="icons/plus_icon.png" alt="Increase BPM" id="plusBtn" class="control-icon" />
    </div>

    <!-- Play/Pause Button with Circular Indicator -->
    <div class="play-button-container">
      <div class="play-circle-container">
        <svg class="progress-indicator" viewBox="0 0 100 100">
          <circle class="progress-bg" cx="50" cy="50" r="45" fill="none" stroke="#ccc" stroke-width="5"></circle>
          <circle class="progress-bar" cx="50" cy="50" r="45" fill="none" stroke="#29be6f" stroke-width="5"
            stroke-dasharray="282.743" stroke-dashoffset="282.743"></circle>
        </svg>
        <img src="icons/play_icon.png" alt="Play" id="playPauseBtn" class="play-icon" />
      </div>
    </div>
  </div>

  <!-- Speed Mode Popup -->
  <div id="speedModePopup" class="speed-mode-popup" style="display: none;">
    <div class="popup-content">
      <span id="closePopup" class="close-popup">&times;</span>
      <h2>Speed Mode Settings</h2>
      <div class="input-row">
        <label for="initialBpm">Initial BPM:</label>
        <input type="number" id="initialBpm" value="100">
      </div>
      <div class="input-row">
        <label for="finalBpm">Final BPM:</label>
        <input type="number" id="finalBpm" value="180">
      </div>
      <div class="input-row">
        <label for="increment">Raise BPM:</label>
        <input type="number" id="increment" value="5">
      </div>
      <div class="input-row">
        <label for="bars">Bars:</label>
        <input type="number" id="bars" value="16">
      </div>
      <button id="saveSpeedMode">Save</button>
      <div id="estimatedTime" style="color: #ffffff; margin-top: 30px;">Estimated time: 0 min</div>
    </div>
  </div>

  <!-- Random Mode Popup (styled like Speed Mode Popup) -->
  <div id="randomModePopup" class="speed-mode-popup" style="display: none;">
    <div class="popup-content">
      <span id="closeRandomPopup" class="close-popup">&times;</span>
      <h2>Random Silent Mode Settings</h2>
      <div class="input-row">
        <label for="randomPercent">Random %:</label>
        <input type="number" id="randomPercent" value="50" />
      </div>
      <div class="input-row">
        <label for="randomBars">Bars:</label>
        <input type="number" id="randomBars" value="10" />
      </div>
      <button id="saveRandomMode">Save</button>
    </div>
  </div>

  <!-- Settings Popup -->
  <div id="settingsPopup" class="speed-mode-popup" style="display: none;">
    <div class="popup-content">
      <span id="closeSettingsPopup" class="close-popup">&times;</span>
      <h2>Background Color</h2>
      <div class="color-picker-wrapper">
        <input type="color" id="bgColorPicker" value="#262626" />
        <div id="colorPreview" class="color-preview"></div>
      </div>
      <button id="saveSettings">Save</button>
    </div>
  </div>
</body>
</html>